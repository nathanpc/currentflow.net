<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Current Flow</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Sanitize -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css" integrity="sha256-gk3z+XTkT2rjrvAxcKDA15OH4w1FssyEwnSC3WnKbWU=" crossorigin="anonymous"/>
<!-- Prism (Syntax Highlighting) -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.min.js" integrity="sha256-jc6y1s/Y+F+78EgCT/lI2lyU7ys+PFYrRSJ6q8/R8+o=" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css" integrity="sha256-N1K43s+8twRa+tzzoF3V8EgssdDiZ6kd9r8Rfgg8kZU=" crossorigin="anonymous"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/autolinker/prism-autolinker.min.js" integrity="sha256-SBdcXd1yqPQNixmtcMwSZJrzPTudHK/LXJxgLGCh3Go=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-uCRLqQjYcKEykao3hISbnt7+Pf9EfLCJUD2oD0JLq40=" crossorigin="anonymous"></script>
<script>Prism.plugins.autoloader.languages_path = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/';</script>
<!-- Custom CSS -->
<link rel="stylesheet" href="/css/main.css">
<!-- Custom Javascript -->
<script src="/js/photo-album.js"></script>
</head>
<body>
<!--[if IE]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
<![endif]-->
<!-- Header -->
<header>
<div class="title-block">
<h1><a href="/">Current Flow</a></h1>
<h3>Endeavours into the world of programming and electronics</h3>
</div>
<!-- Navigation Bar -->
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="https://github.com/nathanpc">GitHub</a></li>
<li><a href="https://www.linkedin.com/in/nathanpc">LinkedIn</a></li>
<li><a href="https://nathancampos.me/">About me</a></li>
</ul>
</nav>
</header>
<!-- Articles -->
<div class="article-container">
<hr>
<article>
<h2><a href="/post/2015-12-27/I-m-Back-/">I'm Back!</a></h2>
<nav>Nathan Campos - Sun 27 December 2015</nav>
<div class="article-body"><meta name="title" content="I'm Back!">
<meta name="author" content="Nathan Campos">
<meta name="created" content="2015-12-27">
<p>Sorry for this extremely long break, I&rsquo;ve been extremely busy with a bunch of stuff from university and wasn&rsquo;t feeling inspired to write any blog posts, but now I&rsquo;m hopefully back and I have a lot of plans for interesting future posts.</p>
<p>This year I got overwhelmed by a shitton of university assignments and to top all that I&rsquo;ve been exposing my projects at a bunch of trade shows together with my friends. If you&rsquo;ve ever exposed things in trade shows you&rsquo;ll know that it&rsquo;s extremely stressing (before, during, and after) and time consuming, so I&rsquo;ve been putting a lot of effort into that. The last trade show I&rsquo;ve been to was called InnovaCities and it happened in Foz do Igua&ccedil;u, <a href="https://www.google.com.br/maps/dir/Vitoria,+Vit%C3%B3ria+-+State+of+Esp%C3%ADrito+Santo/Foz+do+Igua%C3%A7u,+State+of+Paran%C3%A1/@-22.8712631,-51.9386506,6z/data=!4m14!4m13!1m5!1m1!1s0xb83d5d85374ee9:0x97595e7ea70ed809!2m2!1d-40.2957768!2d-20.2976178!1m5!1m1!1s0x94f6983de5db79bb:0x920b68c585cac349!2m2!1d-54.5854238!2d-25.5162467!5i2?hl=en" target="_blank">pretty far from home</a>, and I had a great time there showing a much improved version of the <a href="http://nathancampos.me/post/85832773918/lightwave-am-transmitterreceiver" target="_blank">lightwave transmitter</a> and a automatic shower and sink that focuses on saving water which was a project I did with a friend that had the idea. We even had the pleasure of meeting some polish researchers and the prince of Nigeria.</p>
<p class="image-container"><img alt="A photo with the Prince Momodu Joel Shaka" src="/img/misc/innovacities-prince-nigeria.jpg"/></p>
<p>Of course during this year I did a bunch of projects for myself including headphone amps, pre amplifiers, battery chargers, LED lighting, electronic loads, power amplifiers, and a lot more! I&rsquo;ve also been experimenting with DC/DC conversion and power inverters which will be subjects of future blog posts.</p>
<p>One of the most notable projects I&rsquo;ve been working on almost during the entire year is a <a href="https://github.com/nathanpc/battery-capacity" target="_blank">battery capacity database</a> ,which I plan to include all the batteries I can find, and be extremely helpful to determine which battery to buy next or estimate the battery life of your project with a certain battery, I&rsquo;m currently working to create mathematical models of each battery. I&rsquo;m so focused on this project that I&rsquo;ve ditched the old super simple electronic load, which consisted of just a potentiometer, a op-amp, and a power transistor with a data logging multimeter, to a much better, automated, computer-controlled load that I named <a href="https://github.com/nathanpc/miniload" target="_blank">miniload</a>. Discharging batteries now is a lot faster and a lot less problematic.</p>
<p class="image-container"><img alt="miniload" src="/img/miniload/messy-protoboard.jpg"/></p>
<p>This is just a bit of what happened when I was away. Tomorrow I&rsquo;m my trip to Dubai starts, I&rsquo;ll be there for the new year celebrations and will be back in the middle of January, so don&rsquo;t go away, there&rsquo;s a lot more to come in 2016! </p>
</div>
</article>
<hr>
<article>
<h2><a href="/post/2014-10-11/Power12-The-Mini6-Again-But-Better/">Power12: The Mini6 Again, But Better</a></h2>
<nav>Nathan Campos - Sat 11 October 2014</nav>
<div class="article-body"><meta name="title" content="Power12: The Mini6 Again, But Better">
<meta name="author" content="Nathan Campos">
<meta name="created" content="2014-10-11">
<p class="image-container"><img src="/img/power12/lid-open.jpg"></p>
<p>I&rsquo;m back with another amplifier project, but this time it&rsquo;s kinda like a remake instead of a completely new amp. The story behind this project started 4 days after I completed the Mini6.</p>
<p>While I was drilling the holes for the jacks on the Mini6, I accidentally put too much pressure on the acrylic enclosure and it cracked, it was very small crack, practically impossible to see, between the two RCA jacks on the front, but after using it for a while and noticing how the crack would open a little bit every time I plugged something in, I decided to fix it using super glue (<em>facepalm</em>) and while I was using the glue I didn&rsquo;t notice that one small drop fell in the PCB. I put everything back together and tested, it sounded horrible and when I looked inside I could see the stain of the glue which was destroying the sensitive part of the circuit. So in a moment of rage I decided to throw the whole amp in the trash and design a better one and put it in a better enclosure. So that&rsquo;s how the Power12 was born.</p>
<p class="image-container"><img src="/img/power12/schematic.png"></p>
<p>The first thing I did to the original design was add a <a href="http://en.wikipedia.org/wiki/Boucherot_cell" target="_blank">Zobel network</a> to increase the stability of the amplifier. The other modification I did was the addition of a <a href="http://en.wikipedia.org/wiki/Active_load" target="_blank">active load</a> in the gain stage. Sadly when I was designing it I forgot to add another active load for the differential pair, but this will be fixed in the next revision of the board (I&rsquo;ll also add a <a href="http://sound.westhost.com/project57.htm" target="_blank">SIM</a>).</p>
<p class="image-container"><img src="/img/power12/no-heatsinks.jpg"></p>
<p>Populating the board was a pretty straight forward process since there aren&rsquo;t a lot of components to be placed and as usual the most difficult port was soldering the spade terminals to the ground plane.</p>
<p class="image-container"><img src="/img/power12/enclosure.jpg"></p>
<p>This time I decided to use a very nice <a href="http://www.aliexpress.com/snapshot/6211709629.html" target="_blank">extruded aluminium enclosure</a> that I found on AliExpress. I was a bit skeptical at first about the quality of the enclosures, but when they arrived I was surprised how beautiful they were, and the quality of the extrusion was really good. The seller was great, emailed me to ask about the customs, shipped extremely fast, and packed everything extremely well to make sure nothing would scratch the very fragile black paint of the case and the panels.</p>
<p>Since I decided to use a aluminium enclosure, the best combination would be a very minimalist design, so the only thing in the front panel is the power switch. This decision gave me the idea to place the power LED on the back, giving it a really cool look when it&rsquo;s powered on.</p>
<p class="image-container"><img src="/img/power12/back-panel.jpg"></p>
<p>Drilling the holes for the 2.1mm power connectors was a pain in the ass since I didn&rsquo;t have a drill bit that was bigger than 8mm, so I was forced to use the &ldquo;wiggle&rdquo; technique to make the holes bigger and because of that the drill bit escaped the hole a couple of times and damaged a bit of the back plate, but since it&rsquo;s on the back no one will ever see my mistakes.</p>
<p class="image-container"><img src="/img/power12/thd.png"></p>
<p>The distortion figures are not the best you&rsquo;ve probably seen (it&rsquo;ll be a lot better when I add the second active load in Rev B), but it&rsquo;s low enough that you won&rsquo;t be able to notice it. The plot was created using a script I&rsquo;ve created called <a href="https://gist.github.com/nathanpc/464b65f48d494179be13" target="_blank">plot_thd.py</a>, running <a href="https://github.com/nathanpc/Power12/blob/master/spice/Rev%20A.cir" target="_blank">this SPICE circuit</a>. Sadly I don&rsquo;t have the equipment to measure the real figures, but I&rsquo;m planing to buy a <a href="http://www.keithley.com/products/dcac/audioanalyzer/?mn=2015" target="_blank">Keithley 2015</a> next month.</p>
<p class="image-container"><img src="/img/power12/temp-profile.png"></p>
<p>One thing that I actually was able to measure was the temperature profile of the amplifier, and as you can see it runs pretty cool with those <a href="http://www.digikey.com/product-detail/en/FA-T220-38E/FA-T220-38E-ND/2416492" target="_blank">FA-T220-38E heatsinks</a>. Those figures were measured with the lid closed and with the amplifier right at the point of clipping with a 1kHz sine wave into a 8 ohm load. I&rsquo;ve used my <a href="http://www.keysight.com/en/pd-1765023-pn-U1242B/handheld-digital-multimeter-4-digit?cc=US&lc=eng" target="_blank">Agilent U1242B</a> multimeter in conjunction with a program I wrote called <a href="https://github.com/nathanpc/dmmlog" target="_blank">dmmlog</a> to grab the data, then <a href="https://github.com/nathanpc/plotcsv" target="_blank">plotcsv</a> to generate the graph you see. Sadly I forgot to take pictures of the test setup.</p>
<p>If you want to see all the pictures of the project <a href="http://imgur.com/gallery/UqJ2X/" target="_blank">this Imgur album</a> contains all of them. If you want to have access to all of the files related to this project check out the <a href="https://github.com/nathanpc/Power12" target="_blank">GitHub repo</a>, and if you want to discuss it the best place to go would be the <a href="http://www.diyaudio.com/forums/solid-state/263255-power12-compact-6w-channel-power-amplifier.html" target="_blank">diyAudio thread</a>. </p>
</div>
</article>
<hr>
<article>
<h2><a href="/post/2014-09-11/Mini6-Amplifier/">Mini6 Amplifier</a></h2>
<nav>Nathan Campos - Thu 11 September 2014</nav>
<div class="article-body"><meta name="title" content="Mini6 Amplifier">
<meta name="author" content="Nathan Campos">
<meta name="created" content="2014-09-11">
<p class="image-container"><img src="/img/mini6/mini6.jpg"></p>
<p>I was a bit bored a couple of weeks ago so I decided to design a very simple discrete amplifier rated for 6W/channel just to make sure it would&rsquo;t oscillate and be more confident to build bigger ones.</p>
<p class="image-container"><img src="/img/mini6/schematic.png"></p>
<p>As you can see it&rsquo;s a fairly simple design with a op-amp pre-amplifier and a discrete power amplifier. Building it was extremely simple, the difficult part is always mounting all the panel components and wiring everything.</p>
<p class="image-container"><img src="/img/mini6/checking-values.jpg"></p>
<p>A while ago I built a program called <a href="https://github.com/nathanpc/build-bom" target="_blank">build-bom</a> to help me quickly find the component values when assembling a board. It&rsquo;s a great use for a old EeePC that you may have laying around.</p>
<p class="image-container"><img src="/img/mini6/overview.jpg"></p>
<p>One thing that you may have noticed is that I&rsquo;ve used canned transistors instead of your typical plastic TO-92. The only reason I did this was because they looked cool and I have a bunch laying around.
<nav class="album">
<div class="arrow">&lt;</div>
<section>
<figure class="current">
<img src="/img/mini6/board-cad.png">
<figcaption>How the board looks like in CAD</figcaption>
</figure>
<figure>
<img src="/img/mini6/components.jpg">
<figcaption>Organizing the components to begin soldering</figcaption>
</figure>
<figure>
<img src="/img/mini6/begin-soldering.jpg">
<figcaption>Started soldering</figcaption>
</figure>
<figure>
<img src="/img/mini6/checking-values.jpg">
<figcaption>Checking the values with my program</figcaption>
</figure>
<figure>
<img src="/img/mini6/top-view.jpg">
<figcaption>Top view of the board after soldering</figcaption>
</figure>
<figure>
<img src="/img/mini6/side-view.jpg">
<figcaption>Side view of the board</figcaption>
</figure>
<figure>
<img src="/img/mini6/overview.jpg">
<figcaption>Board with the heatsinks</figcaption>
</figure>
<figure>
<img src="/img/mini6/wiring.jpg">
<figcaption>Wires soldered</figcaption>
</figure>
<figure>
<img src="/img/mini6/lights-on.jpg">
<figcaption>First power-up</figcaption>
</figure>
<figure>
<img src="/img/mini6/front.jpg">
<figcaption>Front panel</figcaption>
</figure>
<figure>
<img src="/img/mini6/back.jpg">
<figcaption>Back panel</figcaption>
</figure>
</section>
<div class="arrow">&gt;</div>
</nav>
<p>If you want to know more about the amplifier check out the <a href="https://github.com/nathanpc/Mini6" target="_blank">GitHub repo</a>. </p>
</div>
</article>
<hr>
<article>
<h2><a href="/post/2014-08-04/Building-the-Mini12/">Building the Mini12</a></h2>
<nav>Nathan Campos - Mon 4 August 2014</nav>
<div class="article-body"><meta name="title" content="Building the Mini12">
<meta name="author" content="Nathan Campos">
<meta name="created" content="2014-08-04">
<p><strong>Update:</strong> This project was my first try at building an amplifier, because of this it is pretty awful in terms of performance, it has very noticeable crossover distorsion. For better designs please look at newer posts here.</p>
<p class="image-container"><img src="/img/mini12/mini12.jpg"></p>
<p>Last week, I decided to take on a very simple project: build a very low distortion, reasonably powerful, battery-powered amplifier that could fit in a very small, transparent enclosure that I had.</p>
<p>The main idea was to have this very small amplifier that could be moved around the house and powered from some 18650 cells so that I could enjoy some music with my friends when they come for our regular LAN parties. Usually we use one of those crappy iPod dock/speaker things that everyone loves, but, personally, they don&rsquo;t sound very good to me.</p>
<p>Since this was a quick project, I decided to make it as simple as possible to avoid any trouble. The easiest it could be was to use an audio op-amp driving a class B output made with darlington transistors with some negative feedback to keep the distortion really low, so that&rsquo;s what I did:</p>
<p class="image-container"><img src="/img/mini12/schematic.png"></p>
<p>I also designed a <a href="/img/mini12/peak-detector.png" target="_blank">very simple peak detector</a> to detect any clipping on the output to make sure the signal was as clean as possible, but, sadly, my case was so small that I couldn&rsquo;t fit it in. Since it would be powered from 2 18650 packs (3 cells each) or a pair of 9V batteries, the <a href="/img/mini12/power-supply.png" target="_blank">power supply</a> is extremely simplistic.</p>
<p>When all of the parts arrived, I decided to get everything prepared to be assembled the next day.</p>
<p class="image-container"><img src="/img/mini12/pre-assembly.jpg"></p>
<p>Choosing where to put the jacks and switches was a bit tricky since the space inside the enclosure was extremely small.</p>
<p class="image-container"><img src="/img/mini12/drilling.jpg"></p>
<p>Since I wasn&rsquo;t patient enough to wait for a PCB, I decided to build the whole thing on a piece of protoboard which was a bit tricky because of the space the jacks took.</p>
<p class="image-container"><img src="/img/mini12/protoboard.jpg"></p>
<p>After soldering the headphone jack and on/off switch, mounted from the inside, it was time to solder the RCA jacks which had to be mounted from the outside. This was very difficult since I had to make the shortest cable possible while making sure that I could still lift the board up to solder the cable to the PCB.</p>
<p class="image-container"><img src="/img/mini12/more-jacks.jpg"></p>
<p>Sliding the board back into place was extremely difficult, but after a lot of wiggling, it was perfectly placed on the bottom of the enclosure, and I was ready to plug the power jacks into the JST connectors on the board. It was the only way to mount them, otherwise I wouldn&rsquo;t be able to lift the board to solder them.</p>
<p class="image-container"><img src="/img/mini12/finished.jpg"></p>
<p>Since it was 1:38AM, I was quite tired, and since I had been working on this thing for <a href="/img/mini12/time.jpg" target="_blank"><strong>7 hours and 12 minutes</strong></a>, I decided that it was time to sleep and leave the enclosure closing and testing for the next day. (<a href="http://i.imgur.com/J9wPMpI.jpg" target="_blank">Obligatory picture of the pile of wires and component leads</a>)</p>
<p>First thing to do in the morning was to test the little beast. This was the test setup (after using my oscilloscope and a dummy load to make sure everything was working fine). I had to use the living room table since my bench was a mess (as usual), and there was no space for the 2 speakers.</p>
<p class="image-container"><img src="/img/mini12/testing.jpg"></p>
<p>And that&rsquo;s all! If you want more technical information about the project, be sure to visit the <a href="https://github.com/nathanpc/mini12" target="_blank">GitHub repo</a>. If you want to discuss it, jump on over to the <a href="http://www.diyaudio.com/forums/solid-state/260161-mini12-my-first-amplifier.html" target="_blank">diyAudio thread</a>. </p>
</div>
</article>
<hr>
</div>
<!-- Pager -->
<nav class="pager">
<p>
<a href='/page/1/'>&lt;</a>
<a href='/page/1/'>1</a>
<a href='/page/2/' class='current'>2</a>
<a href='/page/3/'>3</a>
<a href='/page/4/'>4</a>
<a href='/page/5/'>5</a>
<a href='/page/6/'>6</a>
<a href='/page/7/'>7</a>
<a href='/page/8/'>8</a>
<a href='/page/9/'>9</a>
<a href='/page/10/'>10</a>
<a href='/page/3/'>&gt;</a>
</p>
</nav>
<!-- Page footer -->
<footer>
<p>This blog is powered by <a href="https://github.com/nathanpc/levissimo">Levissimo</a>.</p>
</footer>
</body>
</html>